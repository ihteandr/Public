define(["Lodash","jquery","text!templates/main/pages/home/product-changes-schedule/template.html"],function(e,t,n){return function(){return{restrict:"A",template:n,scope:{},link:function(e,n){e.$watch("requests",function(){t(n[0]).find(".request").click(function(e){var t=e.currentTarget.getAttribute("data-ean");App.navigate("/product/"+t)})})},controller:["$scope","ProductChangesScheduleService",function(t,n){t.requests=[],t.offset=0,n.getChangesSchedule(t.offset).then(function(n){e.each(n.requests,function(e){e.date=new Date(e.date)}),t.requests=n.requests},App.errorHandler),t.handleRequestClick=function(e){e.target.getAttribute("data-product")}}]}}});