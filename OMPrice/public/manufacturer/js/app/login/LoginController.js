define(["jquery","BaseController"],function(e,s){var r=s.extend({_model:null,init:function(e,s){this._super(e),this._model=s},_showError:function(){e("div[name=dataUserName]").addClass("has-error"),e("div[name=dataPassword]").addClass("has-error")},_validate:function(){var s=!0,r=e("#InputUser").val(),a=e("#InputPassword").val();return""===r.trim()?(s=!1,e("div[name=dataUserName]").addClass("has-error")):e("div[name=dataUserName]").removeClass("has-error"),""===a.trim()?(s=!1,e("div[name=dataPassword]").addClass("has-error")):e("div[name=dataPassword]").removeClass("has-error"),s?{username:r,password:a}:!1},handleKeyUp:function(e){13==e.keyCode&&this.submit()},submit:function(){var e=this,s=this._validate();s&&this._model.tryLogin(s).then(function(s){"success"==s.status?e.$scope.$emit("authorized",{user:s.data}):(e.$scope.error=!0,e._showError())},function(){e._showError(),e.$scope.error=!0})},defineScope:function(){this.$scope.handleKeyUp=this.handleKeyUp.bind(this),this.$scope.submit=this.submit.bind(this)}});return r.$inject=["$scope","LoginModel"],r});